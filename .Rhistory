locs[, j] = gsub("FS", "s", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
large.junctions = locs[nchar(locs$connected) >= 5, c(1:5, 31)]
large.junctions[order(large.junctions$connected), ]
large.junctions[order(large.junctions$connected), ]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
grep("GS", locs[, 6])
grep("GS", locs[, 7])
grep("GS", locs[, 8])
grep("GS", locs[, 9])
grep("GS", locs[, 10])
grep("GS", locs[, 11])
grep("GS", locs[, 12])
grep("GS", locs[, 13])
grep("GS", locs[, 15])
grep("GS", locs[, 14])
grep("GS", locs[, 16])
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
grep("S", locs[, 6])
grep("^S$", locs[, 6])
grep("^S$", locs[, 7])
grep("^S$", locs[, 8])
grep("^S$", locs[, 9])
grep("^S$", locs[, 10])
grep("^S$", locs[, 11])
grep("^S$", locs[, 12])
grep("^S$", locs[, 13])
grep("^S$", locs[, 14])
grep("^S$", locs[, 15])
grep("^S$", locs[, 16])
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
large.junctions = locs[nchar(locs$connected) >= 5, c(1:5, 31)]
large.junctions[order(large.junctions$connected), ]
large.junctions[order(large.junctions$connected), ]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
large.junctions = locs[nchar(locs$connected) >= 4, c(1:5, 31)]
large.junctions[order(large.junctions$connected), ]
grep("Jay", locs$Station_Name)
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
large.junctions = locs[nchar(locs$connected) >= 4, c(1:5, 31)]
large.junctions[order(large.junctions$connected), ]
three.junctions = locs[nchar(locs$connected) == 3, c(1:5, 31)]
three.junctions[order(three.junctions$connected), ]
two.junctions = locs[nchar(locs$connected) == 2, c(1:5, 31)]
two.junctions[order(two.junctions$connected), ]
one.junctions = locs[nchar(locs$connected) == 1, c(1:5, 31)]
one.junctions[order(one.junctions$connected), ]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[522]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$key = NULL
locs[1, ]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = NULL
locs[1, ]
locs[1:2, ]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = 0
locs[1, ]
table(locs$key)
locs$key = ""
locs[1, ]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = ""
if (nchar(locs$connected) >= 4) {
locs$key = locs$connected
} else {
locs$key = paste(locs$Station_Name, locs$connected, sep="-")
}
nchar(locs$connected)
(nchar(locs$connected) >= 4)
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4) {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
abcd.junctions = locs[locs$connected == "ABCD", c(1:5, 31)]
abcd.junctions
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "6EM" | locs$connected[j] == "FGR") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs$key
locs[, c(3:5, 32)]
locs[1:500, c(3:5, 32)]
View(locs[, c(3:5, 32)])
View(locs[1001:1862, c(3:5, 32)])
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
locs.coord
grep("1AC", locs$key)
locs$connected[c(285, 1279:1281)]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "6EM" | locs$connected[j] == "FGR" | locs$connected[j] == "1AC") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
locs.coord
View(locs)
grep("2345R", locs$key)
grep("FGR", locs$key)
locs[c(67, 551, 1184), ]
grep("4th Av", locs$Station_Name)
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[552:553] = "FGR" # previously "F"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "6EM" | locs$connected[j] == "FGR" | locs$connected[j] == "1AC") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
locs.coord
grep("DN", locs$key)
locs[grep("DN", locs$key), c(3:5, 32)
[]
locs[grep("DN", locs$key), c(3:5, 32)]
locs[grep("^DN$", locs$key), c(3:5, 32)]
locs[grep("-DN$", locs$key), c(3:5, 32)]
rm(list=ls())
locs = read.csv("~/Downloads/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[c(160, 1214:1216, 1218)] = "DN"
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[552:553] = "FGR" # previously "F"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "DN" | locs$connected[j] == "6EM" | locs$connected[j] == "FGR" | locs$connected[j] == "1AC") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
locs.coord
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs[locs$Station_Name == "Franklin Av", ]
locs[c(265, 1348), 6:8]
locs[c(265, 1348), 6:8] = c("C", "s", "")
locs[c(265, 1348), 6:8]
locs[c(265, 1348), 6:8] = rep(c("C", "s", ""), each=2)
locs[c(265, 1348), 6:8]
locs[locs$Station_Name == "Parkside av", ]
locs[locs$Station_Name == "Parkside Av", ]
locs["Franklin Av", 6:8]
locs[locs$Station_name == "Franklin Av", 6:8]
locs[locs$Station_Name == "Franklin Av", 6:8]
locs[c(98, 1198), 7]
locs[c(98, 1198), 6:8]
locs[c(98, 1198), 6:8] = rep(c("Q", "", ""), each=2)
locs[c(98, 1198), 6:8]
locs[locs$Station_Name == "Neck Rd", ]
locs[locs$Station_Name == "Liberty Av", ]
locs[397:400, 6:8]
locs[397:400, 6:8] = rep(c("C", "", ""), each=4)
locs[397:400, 6:8]
locs[locs$Station_Name == "7 Av", ]
locs[locs$Station_Name == "7Av", ]
locs[locs$Station_Name == "7th Av", ]
locs[554:561, 6:8]
locs[554:561, 6:8] = rep(c("F", "G", ""), each=8)
locs[554:561, 6:8]
locs[locs$Station_Name == "Church Av", ]
locs[c(554:561, 567:570, 1438:1439), 6:8]
locs[c(554:561, 567:570, 1438:1439), 6:8] = rep(c("F", "G", ""), each=12)
dim(locs[c(554:561, 567:570, 1438:1439), 6:8])
locs[c(554:561, 567:570, 1438:1439), 6:8] = rep(c("F", "G", ""), each=14)
locs[c(554:561, 567:570, 1438:1439), 6:8]
locs[locs$Station_Name == "Fort Hamilton Parkway", ]
locs[c(554:561, 567:570, 1438:1439, 564:566, 1437), 6:8] = rep(c("F", "G", ""), each=18)
sort(c(554:561, 567:570, 1438:1439, 564:566, 1437))
View(locs)
locs[locs$Station_Name == "Prospect Park-15 St", ]
locs[c(554:570, 1433:1439), 6:8] = rep(c("F", "G", ""), each=24)
locs[locs$Station_Name == "Whitehall St", ]
locs[locs$Station_Name == "South Ferry", ]
locs[locs$Station_Name == "Metropolitan Av", ]
locs[locs$Station_Name == "Lorimer St", ]
locs$connected[c(206:207, 217, 691:692, 1254:1255, 1500:1501, 1736:1737)]
locs$connected[c(691:692, 1254:1255, 1500:1501)]
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[c(160, 1214:1216, 1218)]
locs$connected[c(50:52, 1117:1120, 1172:1174, 1760)]
locs$connected[c(691:692, 1254:1255, 1500:1501)]
locs[locs$Station_Name == "Long Island City-Court Square", ]
View(locs)
View(locs[1001:1862, ])
grep("Court", locs$Station_Name)
locs[grep("Court", locs$Station_Name), ]
grep(locs$connected == "7EGM")
grep("7EGM", locs$connected)
locs[grep("7EGM", locs$connected), ]
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[552:553] = "FGR" # previously "F"
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs[c(285, 1279:1281), ]
locs[396, ]
locs[522, ]
locs[c(680, 1848:1849), ]
locs[785, ]
locs[1467,  ]
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[c(98, 108, 1198)] = "Q"
locs$connected[c(265, 397:400, 1348)] = "C"
locs[c(265, 397:400, 1348), ]
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[c(98, 108, 1198)]
locs[c(98, 108, 1198), ]
locs$connected[c(98, 108, 1198)] = "Q" # previously "BQ"
locs$connected[c(265, 1348)]
locs[c(265, 1348), ]
locs$connected[c(265, 1348)] = "Cs" # previously "As" or "ACs"
locs$connected[397:400]
locs[397:400, ]
locs$connected[397:400] = "C" # previously "AC"
locs$connected[c(285, 1279:1281)]
locs[c(285, 1279:1281), ]
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$connected[396]
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[c(554:570, 1433:1439)]
locs$connected[c(554:570, 1433:1439)] = "FG" # previously "F"
locs$connected[c(680, 1848:1849)]
locs$connected[c(680, 1848:1849)] = "7EGM" # previously "G"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[c(98, 108, 1198)] = "Q" # previously "BQ"
locs$connected[c(265, 1348)] = "Cs" # previously "As" or "ACs"
locs$connected[397:400] = "C" # previously "AC"
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[c(554:570, 1433:1439)] = "FG" # previously "F"
locs$connected[c(680, 1848:1849)] = "7EGM" # previously "G"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "1R" | locs$connected[j] == "DN" | locs$connected[j] == "GL" | locs$connected[j] == "6EM" | locs$connected[j] == "1AC") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
locs.coord
grep("9th", locs$Station_Name)
grep("9th ", locs$Station_Name)
locs[grep("9th ", locs$Station_Name), ]
locs$connected[551]
locs[551, ]
locs$connected[551] = "FG" # previously "FGR"
locs[552:553, ]
locs[c(67, 551:553, 1184), ]
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[552:553] = "FGR" # previously "F"
locs$connected[c(98, 108, 1198)] = "Q" # previously "BQ"
locs$connected[c(265, 1348)] = "Cs" # previously "As" or "ACs"
locs$connected[397:400] = "C" # previously "AC"
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[551] = "FG" # previously "FGR"
locs$connected[c(554:570, 1433:1439)] = "FG" # previously "F"
locs$connected[c(680, 1848:1849)] = "7EGM" # previously "G"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "1R" | locs$connected[j] == "DN" | locs$connected[j] == "GL" | locs$connected[j] == "1AC" | locs$connected[j] == "6EM" | locs$connected[j] == "FGR") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
locs.coord
setwd("~/Desktop/QBioSub/")
rm(list=ls())
locs = read.csv("~/Desktop/QBioSub/StationEntrances.csv")
for (j in 6:16) {
locs[, j] = gsub("FS", "s", locs[, j])
locs[, j] = gsub("GS", "S", locs[, j])
}
locs$connected = apply(locs[, 6:16], 1, function(a) paste(sort(na.omit(gsub("\\s", "", a))), collapse=""))
locs$connected[552:553] = "FGR" # previously "F"
locs$connected[c(98, 108, 1198)] = "Q" # previously "BQ"
locs$connected[c(265, 1348)] = "Cs" # previously "As" or "ACs"
locs$connected[397:400] = "C" # previously "AC"
locs$connected[c(285, 1279:1281)] = "1AC" # previously "AC"
locs$connected[396] = "ACJLZ" # previously "ACJL"
locs$connected[522] = "BDFM" # previously "7BDFM"
locs$connected[551] = "FG" # previously "FGR"
locs$connected[c(554:570, 1433:1439)] = "FG" # previously "F"
locs$connected[c(680, 1848:1849)] = "7EGM" # previously "G"
locs$connected[785] = "23ACE" # previously "123ACE"
locs$connected[1467] = "EFMR" # previously "eFMR"
locs$key = ""
for (j in 1:nrow(locs)) {
if (nchar(locs$connected[j]) >= 4 | locs$connected[j] == "1R" | locs$connected[j] == "DN" | locs$connected[j] == "GL" | locs$connected[j] == "1AC" | locs$connected[j] == "6EM" | locs$connected[j] == "FGR") {
locs$key[j] = locs$connected[j]
} else {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
if (locs$connected[j] == "ABCD") {
locs$key[j] = paste(locs$Station_Name[j], locs$connected[j], sep="-")
}
}
locs.coord = aggregate(cbind(Station_Latitude, Station_Longitude) ~ key, data=locs, function(a) mean(a))
head(locs.coord)
write.table(locs.coord, file="~/Desktop/QBioSub/listOfStationsConverted.txt" sep="\t", row.names=F, quote=F)
write.table(locs.coord, file="~/Desktop/QBioSub/listOfStationsConverted.txt", sep="\t", row.names=F, quote=F)
locs.mgrs = read.delim("~/Desktop/QBioSub/listOfStationsConverted.txt")
head(locs.mgrs)
